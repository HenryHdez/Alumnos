#PARTE 1
#Descargar imagen de Nodejs
FROM node:14 AS build
WORKDIR /app
#Copiar e instalar dependencias
COPY package*.json ./
RUN npm install
#Copiar el resto de archivos
COPY . .
#Construir la aplicaci贸n para producci贸n
RUN npm run build
#PARTE 2
#Incoporar un servidor WEB
FROM nginx:alpine
#Corpiar versi贸n de producci贸n al servidor
COPY --from=build /app/build /usr/share/nginx/html
#Publicar en el puerto 80 (por defecto de nginx)
EXPOSE 80 
#Iniciar el servidor en segundo plano
CMD ["nginx", "-g", "daemon off;"]

#docker build -t pagina .
#docker run -p 3000:80 pagina